# manage-gateway-ha
# Удалённое управление умным домом через Telegram бот

## Назначение

Данное приложение позволяет удалённо управлять устройствами умного дома, организованными на базе Home Assistant (HA), через Telegram бота.

## Запуск приложения

Перед использованием необходимо добавить в корень проекта файл конфигурации `.env` по шаблону:

BOT_TOKEN=<ТОКЕН_ТЕЛЕГРАМ_БОТА>

BOT_ALLOW_USERS=<СПИСОК_ID_ПОЛЬЗОВАТЕЛЕЙ_ТЕЛЕГРАМ_С_ДОСТУПОМ_К_БОТУ>

HA_TOKEN=<ТОКЕН_ДОСТУПА_К_HA_ПО_API>

HA_URL=<URL_ДЛЯ_ДОСТУПА_К_HA>



## Команды управления

Команды отправляются телеграм боту от пользователей, указанных в конфиге приложения.

- `Hi, Bot`  

  Получить полное имя и ID пользователя Telegram.

- `config HA`  

  Получить конфигурацию Home Assistant.

- `states HA [фильтр]`  

  Получить список всех статусов объектов HA.  
  Опциональный фильтр:  
  - число — вывести первые n элементов,  
  - текст — отфильтровать список по вхождению текста в поле `"entity_id"`.  
  Например:  
  `states HA 2` — первые два элемента,  
  `states HA test` — элементы с "test" в `entity_id`.

- `update:bool states <entity_id> <X>`  

  Обновить статус элемента с указанным `entity_id`.  
  Значение `<X>`:  
  - для выключения — любое из `[0, off, выкл]`,  
  - для включения — любое из `[1, on, вкл]`.  
  Пример:  
  `update:bool states input_boolean.test_switch выкл` — выключить устройство с `entity_id` = `input_boolean.test_switch`.
